#:kivy 1.0

WindowManager:
    MainWindow:
    SecondWindow:

<MainWindow>:
    name: "main_window"
    MainPanel:

<SecondWindow>:
    name: "second_window" 
    SecondPanel:

<MainPanel>:

    image: image
    drawing_field: drawing_field

    BoxLayout:
        orientation: 'horizontal'
        

        DrawingField:
            selection: selection
            id: drawing_field

            size_hint: None, None
            size:  root.width * 0.7, root.height

            Image:
                id: image
                size_hint: None, None
                size: root.width * 0.7 * 0.8, root.height * 0.8
                pos: root.width * 0.7 * 0.1, root.height * 0.1

            LineRectangle:
                id: selection
                pos: root.width * 0.5 - 50, root.height * 0.5 - 25
                
                size: (100, 100)     
                  
        RelativeLayout:
            size_hint: None, None
            size:  root.width * 0.3, root.height

            canvas.before:
                Color:
                    rgba: 0.24, 0.46, 0.89, 1
                Rectangle:
                    size:  root.width * 0.35, root.height

            Button:
                size_hint: 0.7, 0.1
                pos_hint: {'center_x': .5, 'center_y': .1}
                text: "Submit"
                
                on_release: 
                    app.root.current = "second_window"
                    app.root.transition.direction = 'left'

            Button:
                size_hint: 0.7, 0.1
                pos_hint: {'center_x': .5, 'center_y': .7}
                text: "Load image"
                
                on_release: 
                    on_release: root.load()
            
            Button:
                size_hint: 0.7, 0.1
                pos_hint: {'center_x': .5, 'center_y': .6}
                text: "Crop image"
                
                on_release: 
                    on_release: root.crop()
                


<LineRectangle>:
    canvas.after:
        Color:
            rgb: 1, 0, 0
        Line:
            width: 1.75
            rectangle: (self.x, self.y, self.width, self.height)


<SecondPanel>:
    image: image

    BoxLayout:
        orientation: 'horizontal'
        

        DrawingField:
            id: drawing_field

            size_hint: None, None
            size:  root.width * 0.7, root.height

            Image:
                id: image
                size_hint: None, None
                size: root.width * 0.7 * 0.8, root.height * 0.8
                pos: root.width * 0.7 * 0.1, root.height * 0.1
                
     
                  
        RelativeLayout:
            size_hint: None, None
            size:  root.width * 0.3, root.height

            canvas.before:
                Color:
                    rgba: 0.24, 0.46, 0.89, 1
                Rectangle:
                    size:  root.width * 0.35, root.height

            Button:
                size_hint: 0.7, 0.1
                pos_hint: {'center_x': .5, 'center_y': .2}
                text: "Go back"
                
                on_release: 
                    app.root.current = "main_window"
                    app.root.transition.direction = 'right'

            Button:
                size_hint: 0.7, 0.1
                pos_hint: {'center_x': .5, 'center_y': .1}
                text: "Submit"
                
                on_release: 
                    app.root.current = "second_window"
                    app.root.transition.direction = 'left'
